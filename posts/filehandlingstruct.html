<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="../css/style.css" rel="stylesheet" />
  </head>
  <body>
    <div class="navigation">
      <nav>
        <ul>
          <li><a href="../index.html">Home</a> |</li>
          <li><a href="../posts.html">Posts</a> |</li>
          <li><a href="../links.html">Links</a> |</li>
          <li><a href="../donate.html">Support me</a> |</li>
          <li><a href="../recommendation.html">Recommendation</a> |</li>
        </ul>
      </nav>
    </div>
    <p>
      This posts demonstrates how we can write a program that accepts details of
      into a struct and writes it into a specified file.
    </p>
    <textarea rows="50" disabled cols="100">
      // this is the final code let's see what's happening in here
// c program to write the details of the students with to help of struct into a file 
#include <stdio.h>
// creating a separate function
void stdn(int);
typedef struct student {
  char name[10];
  char phoneNum[10];
  char address[10];
  char gender;
  int rollNum;
} student;

int main(int argc, char *argv[]) {
  // asking th user for the number of students to be created
  int len;
  printf("How many students do you want?:\n");
  scanf("%d", &len);
  // calling the stdn function with no of students as arguments

  stdn(len);
  return 0;
}
void stdn(int len) {
  printf("\t\t\t\tEnter student details:\n");
  // now creating a file pointer to store the student details
  FILE *fp = fopen("student.dat", "w");
  student s[len];

  for (int i = 0; i < len; i++) {
    printf("For student no: %d\n", i + 1);
    printf("Name:\n");
    scanf("%s", s[i].name);
    printf("Address:\n");
    scanf("%s", s[i].address);
    printf("phoneNum:\n");
    scanf("%s", s[i].phoneNum);
    printf("Gender:\n");
    // %s should have been used instead of %c a minor mistake :D
    scanf("%s", &s[i].gender);
    printf("Roll num:\n");
    scanf("%d", &s[i].rollNum);

    fwrite(&s, sizeof(student), 1, fp);
  }
  fclose(fp);
  // to print the details of the students
  printf("---------------------------\n");
  printf("Student details:\n");
  printf("---------------------------\n");
  fp = fopen("student.dat", "r");
  // using while loops would be easier while reading from a file
  int j = 0;
  while (fread(&s, sizeof(student), 1, fp)) {
    printf("Name:%s\n", s[j].name);
    printf("address:%s\n", s[j].address);
    printf("gender:%c\n", s[j].gender);
    printf("phoneNum:%s\n", s[j].phoneNum);
    printf("rollNum:%d\n", s[j].rollNum);
    printf("---------------------------\n");
    j++;
  }
  fclose(fp);
}
// this was it let's check if it runs
// formatting has to be done

    </textarea>
  </body>
</html>
